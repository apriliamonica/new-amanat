sequenceDiagram
    actor Kabag
    actor Admin
    actor Ketua as Ketua/Sekretaris/Bendahara
    participant Halaman as Halaman Surat Keluar
    participant Controller as SuratKeluarController
    participant DB as PostgreSQL

    Kabag->>Halaman: Buat surat keluar
    Halaman->>Controller: Simpan surat
    Controller->>DB: INSERT (status: PENGAJUAN)
    Controller-->>Admin: Notifikasi surat baru
    Admin->>Halaman: Klik Proses
    Halaman->>Controller: Proses permintaan
    Controller->>Controller: Generate nomor surat
    Controller->>DB: UPDATE status = DIPROSES
    Admin->>Halaman: Disposisi ke Ketua
    Halaman->>Controller: Buat disposisi
    Controller->>DB: INSERT disposisi
    
    alt Setuju
        Ketua->>Halaman: Klik Setujui
        Halaman->>Controller: Approve surat
        Controller->>DB: UPDATE status=DISETUJUI, isSigned=true
    else Tolak
        Ketua->>Halaman: Klik Tolak
        Halaman->>Controller: Reject surat
        Controller->>DB: UPDATE status = DIKEMBALIKAN
    end
    
    Admin->>Halaman: Klik Kirim Surat
    Halaman->>Controller: Kirim surat
    Controller->>DB: UPDATE status = SELESAI
